<Window x:Class="Anis.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        Icon="/Assets/icon.ico"
        Title="أنيس" Height="450" Width="380"
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing"
        FontFamily="Cairo"
        FlowDirection="RightToLeft"
        Style="{StaticResource MaterialDesignWindow}">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Tray Icon Definition -->
        <tb:TaskbarIcon x:Name="MyNotifyIcon"
                        IconSource="/Assets/icon.ico"
                        ToolTipText="أنيس - شغال في الخلفية"
                        TrayMouseDoubleClick="MyNotifyIcon_TrayMouseDoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu FlowDirection="RightToLeft">
                    <MenuItem Header="الإعدادات" Click="Settings_Click" />
                    <MenuItem x:Name="PauseMenuItem" Header="إيقاف مؤقت" IsCheckable="True" Click="PauseMenuItem_Click" />
                    <Separator />
                    <MenuItem Header="الخروج" Click="Exit_Click" />
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <!-- Settings Content -->
        <StackPanel Grid.Row="0" Orientation="Vertical">

            <GroupBox Header="الفاصل الزمني (بالدقائق)" Margin="0,5">
                <ComboBox Margin="10"
                          VerticalContentAlignment="Center"
                          ItemsSource="{Binding PresetIntervals}"
                          Text="{Binding IntervalMinutes, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          IsEditable="True"
                          materialDesign:HintAssist.Hint="اختر أو اكتب قيمة" />
            </GroupBox>

            <GroupBox Header="المظهر" Margin="0,10">
                <ComboBox Margin="10"
                          ItemsSource="{Binding AvailableThemes}"
                          SelectedItem="{Binding SelectedTheme}"
                          DisplayMemberPath="Name"
                          materialDesign:HintAssist.Hint="اختر المظهر المفضل" />
            </GroupBox>

            <GroupBox Header="عام" Margin="0,10">
                <StackPanel Margin="10">
                    <CheckBox Content="تشغيل مع بدء تشغيل ويندوز" 
                              IsChecked="{Binding RunOnWindowsStartup, Mode=TwoWay}"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="إضافة مقطع" Width="120" Height="30" Margin="5" Click="AddClipButton_Click"/>
            <Button Content="حفظ الإعدادات" Width="120" Height="30" Margin="5" Command="{Binding SaveSettingsCommand}" Style="{StaticResource MaterialDesignRaisedButton}" />
        </StackPanel>
    </Grid>
</Window>